[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "La tenencia de armas en civiles",
    "section": "",
    "text": "Buenas, soy Saúl Gil Pérez.\nEsta web sirve para presentar el trabajo final individual para la asignatura “Programación y manejo de datos en la era Del Big Data”, optativa de GECO en la Facultad de Economía de la Universitat de València.\nLa web de la asignatura está aquí y los trabajos de mis compañeros de curso puedes verlos aquí.\nMi trabajo lleva por título: “La tenencia de armas en civiles”.La idea es hablar un poco sobre como puede afectar la legalización de las armas a la seguridad de los países basándonos en algunos datos estádisticos y sin entrar en legislaciones. Buscamos entender si la tenencia de armas, bajo ciertas circunstancias y regulaciones, podría no solo no comprometer la seguridad, sino también contribuir a su preservación.\nEl trabajo puede verse aquí."
  },
  {
    "objectID": "my_trabajo_BigData.html",
    "href": "my_trabajo_BigData.html",
    "title": "La tenencia de armas en civiles",
    "section": "",
    "text": "En la actualidad, la discusión en torno a la tenencia de armas de fuego ha generado un intenso debate en varios países, donde las opiniones divergentes oscilan entre la creencia de que la posesión de armas garantiza la seguridad individual y la preocupación de que pueda incrementar los riesgos asociados con la violencia. Este trabajo se adentrará en la pregunta fundamental: ¿es posible que la tenencia de armas no solo no disminuya la seguridad, sino que también contribuya a fortalecerla?\nAntes de introducirnos en los datos dejo este vídeo para definir un poco las dos posturas (a favor y en contra) que existen y sus principales argumentos\n\n\n\n\n\n\n\n\n\nA lo largo de la historia, la relación entre la posesión de armas y la seguridad ha sido analizada desde diferentes perspectivas. Algunos argumentan que la capacidad de los ciudadanos para poseer y portar armas puede actuar como un elemento disuasorio ante la criminalidad, proporcionando una sensación de empoderamiento individual y colectivo. Sin embargo, otros sostienen que una mayor disponibilidad de armas podría derivar en consecuencias adversas, incluyendo un aumento en los incidentes violentos.\nExploraremos este tema desde diversas dimensiones, analizando las estadísticas de seguridad. A través de esta investigación, buscamos entender si la tenencia de armas, bajo ciertas circunstancias y regulaciones, podría no solo no comprometer la seguridad, sino también contribuir a su preservación."
  },
  {
    "objectID": "my_trabajo_BigData.html#intro",
    "href": "my_trabajo_BigData.html#intro",
    "title": "Los pingüinos molan",
    "section": "",
    "text": "Vamos a utilizar datos del paquete palmerpenguins. El repo del paquete en CRAN está aquí, el repo de Github está aquí y la página web del paquete está aquí.\nLos datos se pueden cargar en la memoria de de R/RStudio de esta forma:\n\nCódigo# install.packages(\"palmerpenguins\")\nlibrary(palmerpenguins)\ndf &lt;- palmerpenguins::penguins\n\n\nEl dataset contiene observaciones sobre un conjunto de 344 pingüinos de 3 especies. Hay 8 variables."
  },
  {
    "objectID": "my_trabajo_BigData.html#los-pingüinos-molan",
    "href": "my_trabajo_BigData.html#los-pingüinos-molan",
    "title": "Los pingüinos molan",
    "section": "Los pingüinos molan",
    "text": "Los pingüinos molan\nVamos a ver una foto de un pingüinos\n\n\nUn pingüino chulo\n\n\nSí, lo pingüinos molan, así que vamos a poner otra foto de pingüinos que tenemos en nuestro PC pero la vamos a poner en el margen:"
  },
  {
    "objectID": "my_trabajo_BigData.html#algunos-gráficos",
    "href": "my_trabajo_BigData.html#algunos-gráficos",
    "title": "Los pingüinos molan",
    "section": "Algunos gráficos",
    "text": "Algunos gráficos\nBueno pues vamos a hacer algún gráfico, pero claro antes he de cargar los paquetes\n\nCódigolibrary(tidyverse)\n\n\nArreglo los datos\n\nCódigo#- cojos datos de pingüinos y arreglo un poco \ndf &lt;- palmerpenguins::penguins %&gt;% \n  dplyr::select(species, bill_depth_mm, body_mass_g) %&gt;% \n  tidyr::drop_na()\n\n\n\nPrimer gráfico\n\nCódigo#- primer gráfico\np &lt;- ggplot(data = df, \n       mapping = aes(x = bill_depth_mm, y = body_mass_g, color = species)) +\n     geom_point()\np\n\n\n\n\n\n\n\nSegundo\n\nCódigo#- segundo gráfico\np &lt;- p + geom_smooth(method = \"lm\", se = FALSE) \n\np\n\n\n\n\n\n\n\nEl último\n\nCódigo#- tercer gráfico\np + geom_smooth(method = \"lm\", se = FALSE, color = \"black\") \n\n\n\n\n\n\n\n\nCon esto acabo mi trabajo para BigData!!\n\n\n\nInformación sobre la sesión\nAbajo muestro mi entorno de trabajo y paquetes utilizados\n\n\n current session info \n\n─ Session info ───────────────────────────────────────────────────────────────\n setting  value\n version  R version 4.2.2 Patched (2022-11-10 r83330)\n os       Ubuntu 22.04.3 LTS\n system   x86_64, linux-gnu\n ui       X11\n language (EN)\n collate  es_ES.UTF-8\n ctype    es_ES.UTF-8\n tz       Europe/Madrid\n date     2023-11-24\n pandoc   3.1.1 @ /usr/lib/rstudio/resources/app/bin/quarto/bin/tools/ (via rmarkdown)\n\n─ Packages ───────────────────────────────────────────────────────────────────\n package        * version date (UTC) lib source\n cli              3.6.1   2023-03-23 [1] CRAN (R 4.2.2)\n clipr            0.8.0   2022-02-22 [1] CRAN (R 4.2.2)\n colorspace       2.1-0   2023-01-23 [1] CRAN (R 4.2.2)\n desc             1.4.2   2022-09-08 [1] CRAN (R 4.2.2)\n details          0.3.0   2022-03-27 [1] CRAN (R 4.2.0)\n digest           0.6.31  2022-12-11 [1] CRAN (R 4.2.2)\n dplyr          * 1.1.2   2023-04-20 [1] CRAN (R 4.2.2)\n evaluate         0.21    2023-05-05 [1] CRAN (R 4.2.2)\n fansi            1.0.4   2023-01-22 [1] CRAN (R 4.2.2)\n farver           2.1.1   2022-07-06 [1] CRAN (R 4.2.1)\n fastmap          1.1.1   2023-02-24 [1] CRAN (R 4.2.2)\n forcats        * 1.0.0   2023-01-29 [1] CRAN (R 4.2.2)\n generics         0.1.3   2022-07-05 [1] CRAN (R 4.2.2)\n ggplot2        * 3.4.2   2023-04-03 [1] CRAN (R 4.2.2)\n glue             1.6.2   2022-02-24 [1] CRAN (R 4.2.2)\n gtable           0.3.3   2023-03-21 [1] CRAN (R 4.2.2)\n hms              1.1.3   2023-03-21 [1] CRAN (R 4.2.2)\n htmltools        0.5.5   2023-03-23 [1] CRAN (R 4.2.2)\n htmlwidgets      1.6.2   2023-03-17 [1] CRAN (R 4.2.2)\n httr             1.4.7   2023-08-15 [1] CRAN (R 4.2.2)\n jsonlite         1.8.7   2023-06-29 [1] CRAN (R 4.2.2)\n knitr            1.43    2023-05-25 [1] CRAN (R 4.2.2)\n labeling         0.4.2   2020-10-20 [1] CRAN (R 4.2.2)\n lattice          0.20-45 2021-09-22 [4] CRAN (R 4.2.0)\n lifecycle        1.0.3   2022-10-07 [1] CRAN (R 4.2.1)\n lubridate      * 1.9.2   2023-02-10 [1] CRAN (R 4.2.2)\n magrittr         2.0.3   2022-03-30 [1] CRAN (R 4.2.2)\n Matrix           1.5-3   2022-11-11 [4] CRAN (R 4.2.2)\n mgcv             1.8-41  2022-10-21 [4] CRAN (R 4.2.1)\n munsell          0.5.0   2018-06-12 [1] CRAN (R 4.2.2)\n nlme             3.1-162 2023-01-31 [4] CRAN (R 4.2.2)\n palmerpenguins * 0.1.1   2022-08-15 [1] CRAN (R 4.2.1)\n pillar           1.9.0   2023-03-22 [1] CRAN (R 4.2.2)\n pkgconfig        2.0.3   2019-09-22 [1] CRAN (R 4.2.2)\n png              0.1-8   2022-11-29 [1] CRAN (R 4.2.2)\n purrr          * 1.0.1   2023-01-10 [1] CRAN (R 4.2.2)\n R6               2.5.1   2021-08-19 [1] CRAN (R 4.2.2)\n readr          * 2.1.4   2023-02-10 [1] CRAN (R 4.2.2)\n rlang            1.1.1   2023-04-28 [1] CRAN (R 4.2.2)\n rmarkdown        2.22    2023-06-01 [1] CRAN (R 4.2.2)\n rprojroot        2.0.3   2022-04-02 [1] CRAN (R 4.2.2)\n rstudioapi       0.14    2022-08-22 [1] CRAN (R 4.2.2)\n scales           1.2.1   2022-08-20 [1] CRAN (R 4.2.2)\n sessioninfo      1.2.2   2021-12-06 [1] CRAN (R 4.2.0)\n stringi          1.7.12  2023-01-11 [1] CRAN (R 4.2.2)\n stringr        * 1.5.0   2022-12-02 [1] CRAN (R 4.2.2)\n tibble         * 3.2.1   2023-03-20 [1] CRAN (R 4.2.2)\n tidyr          * 1.3.0   2023-01-24 [1] CRAN (R 4.2.2)\n tidyselect       1.2.0   2022-10-10 [1] CRAN (R 4.2.2)\n tidyverse      * 2.0.0   2023-02-22 [1] CRAN (R 4.2.2)\n timechange       0.2.0   2023-01-11 [1] CRAN (R 4.2.2)\n tzdb             0.4.0   2023-05-12 [1] CRAN (R 4.2.2)\n utf8             1.2.3   2023-01-31 [1] CRAN (R 4.2.2)\n vctrs            0.6.3   2023-06-14 [1] CRAN (R 4.2.2)\n withr            2.5.0   2022-03-03 [1] CRAN (R 4.2.2)\n xfun             0.39    2023-04-20 [1] CRAN (R 4.2.2)\n xml2             1.3.4   2023-04-27 [1] CRAN (R 4.2.2)\n yaml             2.3.7   2023-01-23 [1] CRAN (R 4.2.2)\n\n [1] /home/pjpv/R/x86_64-pc-linux-gnu-library/4.2\n [2] /usr/local/lib/R/site-library\n [3] /usr/lib/R/site-library\n [4] /usr/lib/R/library\n\n──────────────────────────────────────────────────────────────────────────────"
  },
  {
    "objectID": "my_trabajo_BigData.html#introducción",
    "href": "my_trabajo_BigData.html#introducción",
    "title": "La tenencia de armas en civiles",
    "section": "",
    "text": "En la actualidad, la discusión en torno a la tenencia de armas de fuego ha generado un intenso debate en varios países, donde las opiniones divergentes oscilan entre la creencia de que la posesión de armas garantiza la seguridad individual y la preocupación de que pueda incrementar los riesgos asociados con la violencia. Este trabajo se adentrará en la pregunta fundamental: ¿es posible que la tenencia de armas no solo no disminuya la seguridad, sino que también contribuya a fortalecerla?\nAntes de introducirnos en los datos dejo este vídeo para definir un poco las dos posturas (a favor y en contra) que existen y sus principales argumentos\n\n\n\n\n\n\n\n\n\nA lo largo de la historia, la relación entre la posesión de armas y la seguridad ha sido analizada desde diferentes perspectivas. Algunos argumentan que la capacidad de los ciudadanos para poseer y portar armas puede actuar como un elemento disuasorio ante la criminalidad, proporcionando una sensación de empoderamiento individual y colectivo. Sin embargo, otros sostienen que una mayor disponibilidad de armas podría derivar en consecuencias adversas, incluyendo un aumento en los incidentes violentos.\nExploraremos este tema desde diversas dimensiones, analizando las estadísticas de seguridad. A través de esta investigación, buscamos entender si la tenencia de armas, bajo ciertas circunstancias y regulaciones, podría no solo no comprometer la seguridad, sino también contribuir a su preservación."
  },
  {
    "objectID": "my_trabajo_BigData.html#código",
    "href": "my_trabajo_BigData.html#código",
    "title": "La tenencia de armas en civiles",
    "section": "Código",
    "text": "Código\n\nCódigolibrary(tidyverse)\nlibrary(rio)\nlibrary(httr)\nlibrary(readxl)\nlibrary(eurostat) \nlibrary(DT)\nlibrary(fs)\n\nfs::dir_create(\"datos\")\n# Definir la URL y el destino\nurl &lt;- \"https://github.com/copitodeleche/Datos_trabajos/blob/21f73dead967ad21704bead1f332531ffc1b9a04/SAS-BP-Civilian-held-firearms-annexe.xlsx?raw=true\"\ndestino &lt;- \"./datos/SAS-BP-Civilian-held-firearms-annexe.xlsx\"\naa &lt;- import(url)\nwrite.csv(aa, destino)\n\naa &lt;- unite(aa, \"Region\", c(\"Region\", \"...4\"), sep = \" \", remove = TRUE, na.rm = TRUE)\n\nbb &lt;- aa %&gt;%\n  arrange(desc(`Estimate civilian firearms/100 persons`)) %&gt;%\n  filter(Region %in% \"Europe\")\n\n\nurl &lt;- \"https://github.com/copitodeleche/Datos_trabajos/blob/c82aa58dbae4f2ad56958a7a4b87f9d20a607d1e/crim_off_cat__custom_9536053_spreadsheet%20(2).xlsx?raw=true\"\neu2 &lt;- import(url)\ndestino &lt;- \"./datos/crim_off_cat__custom_9536053_spreadsheet%20(2).xlsx\"\nwrite.csv(eu2, destino)\n\neu &lt;- eu2 %&gt;%\n  select(-where(~all(is.na(.)))) %&gt;%\n  pivot_longer(cols = starts_with(\"2\"), \n               names_to = \"year\", \n               values_to = \"robos/100k_habitantes\", \n               names_prefix = \"X\") %&gt;%\n  filter(year %in% \"2017\") %&gt;%\n  rename(\"Country\" = `GEO (Labels)`) %&gt;%\n  select(\"robos/100k_habitantes\" , \"Country\")\n\n\nbb &lt;- bb %&gt;%\n   select(\"Population 2017\", \"Estimate of firearms in civilian possession\", \"Country\") %&gt;%\n  mutate(Estimate_of_firearms_per_100k = as.numeric(`Estimate of firearms in civilian possession`) / `Population 2017` * 100000)\n\nresult_df &lt;- left_join(bb, eu, by = \"Country\")\nresult_df &lt;- result_df %&gt;%\n  mutate_all(~ifelse(. == \":\", NA, .)) %&gt;%\n  drop_na()\n\n\nPrimero vamos a ilustrar de una forma más gráfica cuales son los países que más armas por habitantes tiene y después vamos a introducirnos de forma más detallada esstudiando la violencia en los paises con más armas comparados con los que menos armas por habitante tienen.\n\n\nCódigo\nMapa\n\n\n\n\nCódigolibrary(giscoR)\nlibrary(tmap)\n\n\neu3 &lt;- eu2 %&gt;% \n   select(-where(~all(is.na(.)))) %&gt;%\n  pivot_longer(cols = starts_with(\"2\"), \n               names_to = \"year\", \n               values_to = \"robos/100k_habitantes\", \n               names_prefix = \"X\") %&gt;%\n  filter(year %in% \"2017\") %&gt;%\n  rename(\"Country\" = `GEO (Labels)`)\n\n\neuropa &lt;- gisco_get_countries(resolution = \"01\")\n\neuropa &lt;- subset(europa, CNTR_ID %in% eu3$`GEO (Codes)`)\n\n\nmap_data &lt;- merge(europa, eu3, by.x = \"CNTR_ID\", by.y = \"GEO (Codes)\", all.x = TRUE)\nmap_data$`robos/100k_habitantes` &lt;- as.numeric(map_data$`robos/100k_habitantes`)\n\nmapa &lt;- tm_shape(map_data) +\n  tm_borders() +\n  tm_fill(col = \"robos/100k_habitantes\", style = \"equal\", palette = \"Blues\", n = 4) +\n  tm_layout(title = \"Robos por 100,000 habitantes en Europa (2017)\") +\n  tm_view(legend.position = c(\"right\", \"bottom\"))\n\n\n\n\n\nCódigomapa\n\n\n\n\n\n\n\n\n\n\nEn este gráfico de barras observamos que los paises con más armas por cada 100.000 habitantes son Serbia, Montenegro, Finlandia, Islandia y Austria(Bosnia and Herzegovina sería el cuarto pero no existen datos de violencia así que lo descartamos del estudio).\n\n\nCódigo\nGráfico\n\n\n\n\nCódigolibrary(ggplot2)\n\n# Convertir la columna 'Estimate_of_firearms_per_100k' a numérica\nresult_df$Estimate_of_firearms_per_100k &lt;- as.numeric(result_df$Estimate_of_firearms_per_100k)\n\n# Ordenar el dataframe por la columna 'Estimate_of_firearms_per_100k' de manera descendente\nresult_df &lt;- result_df[order(-result_df$Estimate_of_firearms_per_100k), ]\n\n# Crear la gráfica de barras\ngráfico1 &lt;- ggplot(result_df, aes(x = reorder(Country, Estimate_of_firearms_per_100k), y = Estimate_of_firearms_per_100k)) +\n  geom_bar(stat = \"identity\", fill = \"skyblue\") +\n  labs(title = \"Países con Más y Menos Armas Civiles por 100,000 habitantes\",\n       x = \"País\",\n       y = \"Armas Civiles por 100,000 habitantes\",\n       caption = \"Fuente: Small Arms Survey\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\nCódigográfico1\n\n\n\n\n\n\n\n\n\n\nAl analizar la estimación de armas civiles por cada 100,000 habitantes, se observa una tendencia interesante. Países que presentan una mayor posesión de armas per cápita tienden a ser relativamente ricos en comparación con aquellos con menos armas. Un ejemplo de esta relación es la diferencia marcada entre países como Montenegro y Rumania. Montenegro, con una estimación de armas por encima de la media, muestra un perfil económico más sólido, mientras que Rumania, con una posesión de armas más baja, podría indicar una situación económica diferente. Estos patrones sugieren una posible correlación entre la riqueza de un país y la cantidad de armas civiles en posesión de sus habitantes. Aunque no nos vamos a centrar en esa posible correlación, eso es un tema a parte que podría ser interesante para otro momento.\n\n\nCódigo\nGráfico\n\n\n\n\nCódigolibrary(plotly)\n\nresult_df$`robos/100k_habitantes` &lt;- as.numeric(result_df$`robos/100k_habitantes`)\n\ntop_bottom_countries &lt;- result_df %&gt;%\n  arrange(desc(`robos/100k_habitantes`)) %&gt;%\n  slice(c(1:8, (n() - 7):n()))\n\n\ntop_bottom_countries$Country &lt;- factor(top_bottom_countries$Country, \n                                       levels = rev(top_bottom_countries$Country))\n\ngrafico2 &lt;- ggplot(top_bottom_countries, aes(x = reorder(Country, `robos/100k_habitantes`), y = `robos/100k_habitantes`)) +\n  geom_bar(stat = \"identity\", fill = \"skyblue\") +\n  labs(title = \" Los 8 países con más/menos robos con violencia \",\n       x = \"Países\",\n       y = \"Robos/100k habitantes\", \n       caption = \"Fuente: Eurostat\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\nCódigografico2\n\n\n\n\n\n\n\n\n\n\nA simple vista, al observar la relación entre la posesión de armas de fuego y la tasa de robos por cada 100,000 habitantes, se pueden identificar algunos patrones interesantes en los datos. Los países que exhiben altos niveles de posesión de armas de fuego no parecen mostrar necesariamente una correlación clara con tasas más altas de robos con violencia. Del mismo modo, aquellos países con menor posesión de armas tampoco demuestran de manera evidente tasas más bajas de violencia.\nEste hallazgo sugiere que factores adicionales pueden influir significativamente en las tasas de criminalidad, y la relación entre la posesión de armas y la seguridad pública podría ser más compleja de lo que sugieren las percepciones comunes. Será crucial explorar y analizar más a fondo estos datos para identificar posibles correlaciones y entender mejor los determinantes de la seguridad en diferentes contextos.\nPara ello vamos a ver la correlación de la forma más clara que se puede hacer que es con un mapa de dispersión.\n\n\nCódigo\nGráfico\n\n\n\n\nCódigoresult &lt;- result_df %&gt;%\n  rename(robos_100k_habitantes = `robos/100k_habitantes`)\n\n# Crea el gráfico de dispersión con la línea de regresión\nscatter &lt;- plot_ly(result, \n                   x = ~Estimate_of_firearms_per_100k, \n                   y = ~robos_100k_habitantes, \n                   text = ~Country,\n                   mode = \"markers\",\n                   type = \"scatter\") %&gt;%\n  add_trace(\n    x = ~Estimate_of_firearms_per_100k, \n    y = ~lm(robos_100k_habitantes ~ Estimate_of_firearms_per_100k, data = result_df)$fitted.values,\n    mode = \"lines\",\n    line = list(color = 'red', width = 2),\n    name = \"Línea de regresión\"\n  ) %&gt;%\n  layout(\n    title = \"Relación entre robos con violencia y armas por cada 100,000 habitantes\",\n    xaxis = list(title = \"Estimate_of_firearms_per_100k\"),\n    yaxis = list(title = \"Robos por 100,000 habitantes\"),\n    hovermode = \"closest\",\n    annotations = list(\n      text = \"Fuente: Small Arms Survey y Eurostat\",\n      showarrow = FALSE,\n      xref = \"paper\",\n      yref = \"paper\",\n      x = 0,\n      y = 0,\n      xanchor = \"left\",\n      yanchor = \"bottom\"\n    )\n  )\n\n\n\n\n\nCódigo# Mostrar el gráfico\nscatter\n\n\n\n\n\n\n\n\nTras analizar la relación entre la posesión de armas, representada por la tasa de armas por cada 100,000 habitantes (Estimate_of_firearms_per_100k), y la incidencia de robos violentos por cada 100,000 habitantes (Robos_100k_habitantes), no se observa una clara correlación entre ambos indicadores. El análisis visual mediante un gráfico de dispersión dinámico con una línea de regresión no revela patrones evidentes que sugieran una relación directa entre la cantidad de armas en posesión de civiles y la tasa de robos violentos en los países analizados. Es importante señalar que esta conclusión se basa en la exploración visual y puede requerir análisis estadísticos más avanzados para obtener conclusiones más precisas.\nEn conclusión, el análisis de los datos disponibles no permite establecer de manera concluyente una correlación entre la posesión de armas y la incidencia de robos violentos. La falta de una relación clara en este estudio sugiere que la dinámica entre la cantidad de armas en posesión de civiles y la tasa de robos violentos puede depender de una multitud de factores adicionales. Es crucial reconocer que la complejidad de este fenómeno podría estar influenciada por variables como la implementación de políticas de control de armas, factores socioeconómicos, y características culturales específicas de cada país. Por lo tanto, se hace necesario realizar investigaciones más detalladas y análisis estadísticos robustos para comprender mejor estas relaciones y sus matices.\nAdemás, es fundamental tener en cuenta que la percepción de si existe o no una relación entre la posesión de armas y la tasa de robos violentos puede depender en gran medida del juicio moral individual. Las opiniones sobre el control de armas y su impacto en la seguridad pública a menudo están influenciadas por valores personales, experiencias culturales y creencias arraigadas. En consecuencia, mientras que los datos y los análisis estadísticos proporcionan información valiosa, la interpretación de estos resultados puede variar significativamente según la perspectiva moral de cada persona. En lo personal mi juicio moral se podría ver reflejado en este video:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n##Fuentes https://www.smallarmssurvey.org/ https://ec.europa.eu/eurostat"
  }
]