"0","#| code-fold: true"
"0","#| warning: false"
"0","result <- result_df %>%"
"0","  rename(robos_100k_habitantes = `robos/100k_habitantes`)"
"0",""
"0","# Crea el gráfico de dispersión con la línea de regresión"
"0","scatter <- plot_ly(result, "
"0","                   x = ~Estimate_of_firearms_per_100k, "
"0","                   y = ~robos_100k_habitantes, "
"0","                   text = ~Country,"
"0","                   mode = ""markers"","
"0","                   type = ""scatter"") %>%"
"0","  add_trace("
"0","    x = ~Estimate_of_firearms_per_100k, "
"0","    y = ~lm(robos_100k_habitantes ~ Estimate_of_firearms_per_100k, data = result_df)$fitted.values,"
"0","    mode = ""lines"","
"0","    line = list(color = 'red', width = 2),"
"0","    name = ""Línea de regresión"""
"0","  ) %>%"
"0","  layout("
"0","    title = ""Relación entre robos con violencia y armas por cada 100,000 habitantes"","
"0","    xaxis = list(title = ""Estimate_of_firearms_per_100k""),"
"0","    yaxis = list(title = ""Robos por 100,000 habitantes""),"
"0","    hovermode = ""closest"","
"0","    annotations = list("
"0","      text = ""Fuente: Small Arms Survey y Eurostat"","
"0","      showarrow = FALSE,"
"0","      xref = ""paper"","
"0","      yref = ""paper"","
"0","      x = 0,"
"0","      y = 0,"
"0","      xanchor = ""left"","
"0","      yanchor = ""bottom"""
"0","    )"
"0","  )"
"0",""
